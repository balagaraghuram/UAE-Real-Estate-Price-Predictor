#!/usr/bin/env python3
"""
Main entry point for the UAE Real Estate Price Predictor project.
This script orchestrates data cleaning, model training, and prediction.
"""

import argparse
import os
import sys

# Import your existing scripts
# Adjust the import paths if your folder structure is different
from src.data_preprocessing import main as data_clean_main
from src.train_model import main as train_main
from src.predict import main as predict_main

def main():
    """
    Parses command-line arguments and runs the appropriate steps:
    1) Clean data
    2) Train models
    3) Predict house prices
    """
    parser = argparse.ArgumentParser(
        description="UAE Real Estate Price Predictor Pipeline"
    )
    parser.add_argument(
        "--clean",
        action="store_true",
        help="Run the data cleaning script (data_preprocessing.py)."
    )
    parser.add_argument(
        "--train",
        action="store_true",
        help="Train models (train_model.py) after data cleaning."
    )
    parser.add_argument(
        "--predict",
        action="store_true",
        help="Run prediction interactively (predict.py)."
    )

    args = parser.parse_args()

    # If no flags provided, display usage
    if not any([args.clean, args.train, args.predict]):
        parser.print_help()
        sys.exit(0)

    # 1) Clean Data
    if args.clean:
        print("[INFO] Running data cleaning...")
        data_clean_main()

    # 2) Train Model
    if args.train:
        print("[INFO] Training models...")
        train_main()

    # 3) Predict
    if args.predict:
        print("[INFO] Entering prediction mode...")
        predict_main()

if __name__ == "__main__":
    main()
